syntax = "proto3";

package axion.runner;

import "common/common.proto";

// Registration messages
message RegisterAgentRequest {
  string server_id = 1;
  string agent_token = 2;
  AgentInfo agent_info = 3;
}

message AgentInfo {
  string version = 1;
  string os = 2;
  string architecture = 3;
  ServerInfo server_info = 4;
}

message ServerInfo {
  string os = 1;
  string architecture = 2;
  int64 total_memory = 3;
  int64 available_memory = 4;
  double cpu_cores = 5;
  bool docker_installed = 6;
  string docker_version = 7;
}

message RegisterAgentResponse {
  axion.common.Status status = 1;
  oneof result {
    axion.common.Error error = 2;
    RegisterAgentData data = 3;
  }
}

message RegisterAgentData {
  string agent_id = 1;
  string server_id = 2;
  bool registration_successful = 3;
  string message = 4;
}
