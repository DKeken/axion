syntax = "proto3";

package axion.graph;

import "common/common.proto";
import "common/health.proto";
import "graph/projects.proto";
import "graph/graph.proto";
import "graph/services.proto";
import "graph/sync.proto";

// Graph Service - управление проектами и графами

service GraphService {
  // Projects
  rpc CreateProject(CreateProjectRequest) returns (ProjectResponse);
  rpc GetProject(GetProjectRequest) returns (ProjectResponse);
  rpc UpdateProject(UpdateProjectRequest) returns (ProjectResponse);
  rpc DeleteProject(DeleteProjectRequest) returns (axion.common.Empty);
  rpc ListProjects(ListProjectsRequest) returns (ListProjectsResponse);

  // Graph
  rpc GetGraph(GetGraphRequest) returns (GraphResponse);
  rpc UpdateGraph(UpdateGraphRequest) returns (GraphResponse);
  rpc ListGraphVersions(ListGraphVersionsRequest) returns (ListGraphVersionsResponse);
  rpc RevertGraphVersion(RevertGraphVersionRequest) returns (GraphResponse);

  // Services (project services из графа)
  rpc ListServices(ListServicesRequest) returns (ListServicesResponse);
  rpc GetService(GetServiceRequest) returns (ServiceResponse);
  
  // Синхронизация
  rpc SyncGraphWithServices(SyncGraphWithServicesRequest) returns (SyncGraphWithServicesResponse);
  rpc ValidateGraph(ValidateGraphRequest) returns (ValidateGraphResponse);
  
  // Health Check
  rpc HealthCheck(axion.common.HealthCheckRequest) returns (axion.common.HealthCheckResponse);
}
