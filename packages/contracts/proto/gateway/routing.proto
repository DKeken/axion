syntax = "proto3";

package axion.gateway;

import "common/common.proto";
import "gateway/enums.proto";

// Routing messages
message RouteRequestRequest {
  string service_name = 1;
  string method = 2; // HTTP method или gRPC method
  string path = 3;
  map<string, string> headers = 4;
  bytes body = 5;
  LoadBalancingStrategy strategy = 6;
}

message RouteRequestResponse {
  axion.common.Status status = 1;
  oneof result {
    axion.common.Error error = 2;
    RoutedResponse response = 3;
  }
}

message RoutedResponse {
  int32 status_code = 1;
  map<string, string> headers = 2;
  bytes body = 3;
  string instance_id = 4; // Какой инстанс обработал запрос
}
