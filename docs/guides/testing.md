---
title: "Тестирование"
description: "Стратегия обеспечения качества: контрактные тесты, E2E и валидация генерации."
---

# Стратегия Тестирования

Axion применяет пирамиду тестирования, адаптированную под специфику мета-фреймворка.

## 1. Contract Testing (Контрактные тесты)
Критически важны для предотвращения рассинхронизации между сервисами.

*   **Schema Check**: Проверяет валидность `.proto` файлов (синтаксис, линтинг).
*   **Compatibility Check**: Утилита `buf breaking` проверяет, что новые изменения не ломают обратную совместимость (например, удаление полей или изменение ID полей).

## 2. End-to-End (E2E) Тесты
Проверяют полные пользовательские сценарии. Тесты запускаются в изолированном Docker-окружении.

**Ключевой сценарий (Happy Path):**
1.  **Init**: Создание нового проекта через API.
2.  **Design**: Добавление сервисов и связей в граф.
3.  **Generate**: Запуск кодогенерации и ожидание завершения.
4.  **Validate**: Проверка статуса валидации (все 6 уровней ✅).
5.  **Deploy**: Эмуляция деплоя на тестовый агент.

```bash
# Запуск E2E тестов локально
bun test:e2e
```

## 3. Валидация генерации (Generated Code Tests)
Специфичный для Axion уровень тестирования. Мы тестируем не только платформу, но и код, который она производит.

*   **Compilation Test**: Сгенерированный код должен компилироваться (`tsc`).
*   **Dependency Check**: Все импорты должны разрешаться.
*   **Linting**: Код должен соответствовать ESLint правилам.

Если Blueprint производит невалидный код, это считается багом платформы, а не пользователя.

## 4. Unit Tests
Покрывают сложную бизнес-логику внутри сервисов Control Plane (например, алгоритмы диффинга графов или расчет биллинга).

*   **Инструмент**: `bun test` (совместим с Jest).
*   **Моки**: Активное использование моков для Kafka и базы данных.
