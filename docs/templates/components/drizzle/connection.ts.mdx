---
title: "Component: Drizzle Connection"
description: "–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î —á–µ—Ä–µ–∑ Drizzle ORM."
order: 0
---

# Component: Drizzle Connection

## –û–ø–∏—Å–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î —á–µ—Ä–µ–∑ Drizzle ORM.

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤:** `database/base/connection.mdx` –¥–ª—è Drizzle

<Callout type="info" title="–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å">
  –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö ORM —Å–º. [EXTENSIBILITY](../../EXTENSIBILITY)
</Callout>

## üìÑ –ö–æ–¥

```typescript
// src/database/drizzle/connection.ts
import { drizzle } from "drizzle-orm/postgres-js";
import postgres from "postgres";
import { sql } from "drizzle-orm";

export function createDrizzleConnection(databaseUrl: string) {
  const connection = postgres(databaseUrl, {
    max: 10,
    idle_timeout: 20,
    connect_timeout: 10,
  });

  return drizzle(connection);
}

// –í–ê–ñ–ù–û: –î–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è connection –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ
// –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å wrapper –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –∏ drizzle, –∏ postgres connection
// –ü—Ä–∏–º–µ—Ä wrapper:
// export class DrizzleConnectionWrapper {
//   private postgresConn: ReturnType<typeof postgres>;
//   private drizzleDb: ReturnType<typeof drizzle>;
//
//   constructor(databaseUrl: string) {
//     this.postgresConn = postgres(databaseUrl, {...});
//     this.drizzleDb = drizzle(this.postgresConn);
//   }
//
//   getDrizzle() { return this.drizzleDb; }
//   async disconnect() { await this.postgresConn.end(); }
// }

export async function drizzleHealthCheck(
  connection: ReturnType<typeof drizzle>
) {
  await connection.execute(sql`SELECT 1`);
}

export async function drizzleDisconnect(db: ReturnType<typeof drizzle>) {
  // –í–ê–ñ–ù–û: Drizzle –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ postgres connection
  // –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å wrapper –∫–ª–∞—Å—Å (—Å–º. –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤—ã—à–µ)
  // –∏–ª–∏ —Ö—Ä–∞–Ω–∏—Ç—å postgres connection –æ—Ç–¥–µ–ª—å–Ω–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
  // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π API (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
  // const connection = (db as any).client;
  // if (connection && typeof connection.end === 'function') {
  //   await connection.end();
  // }
  // –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å wrapper –∫–ª–∞—Å—Å –≤ DatabaseConnection
}
```
